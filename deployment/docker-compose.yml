version: "3.2"
services:
  mongodb:
    extends:
      file: ../development/docker-compose.yml
      service: mongodb
  rabbitmq:
    extends:
      file: ../development/docker-compose.yml
      service: rabbitmq
  ingredients:
    build: ../ingredients
    ports:
      - "8082:8082"
    environment:
      SPRING_DATA_MONGODB_HOST: mongodb
      SPRING_RABBITMQ_HOST: rabbitmq

review:
    build: ../review
    ports:
      - "8083:8083"
    environment:
      SPRING_DATA_MONGODB_HOST: mongodb
      SPRING_RABBITMQ_HOST: rabbitmq

  order:
    build: ../order
    ports:
      - "8084:8084"
    environment:
      SPRING_DATA_MONGODB_HOST: mongodb
      SPRING_RABBITMQ_HOST: rabbitmq
  
  dishes:
    build: ../dishes
    ports:
      - "8085:8085"
    environment:
      SPRING_DATA_MONGODB_HOST: mongodb
      SPRING_RABBITMQ_HOST: rabbitmq

  customer:
    build: ../customer
    ports:
      - "8081:8081"
    environment:
      SPRING_DATA_MONGODB_HOST: mongodb
      SPRING_RABBITMQ_HOST: rabbitmq
